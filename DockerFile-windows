# Compile Environment for Qt Applications (windows 10)
# DF Supply, Inc.
# Scott Moore
# 2/26/2022

FROM mcr.microsoft.com/windows:20H2

# Install chocolatey
RUN powershell "Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))""

# Install MSVC 2019
RUN choco "install visualstudio2019buildtools"

# Build Qt Source (native builds)
RUN powershell "Invoke-WebRequest -Uri http://download.qt.io/official_releases/qt/5.15/5.15.2/single/qt-everywhere-src-5.15.2.zip -OutFile qt-everywhere-src-5.15.2.zip"
RUN powershell "Expand-Archive -LiteralPath 'c:\qt-everywhere-src-5.15.2.zip' -DestinationPath 'C:\qt5test\'"